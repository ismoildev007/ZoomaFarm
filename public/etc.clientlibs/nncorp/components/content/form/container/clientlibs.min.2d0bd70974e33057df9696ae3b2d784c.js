function _slicedToArray(a,e){return _arrayWithHoles(a)||_iterableToArrayLimit(a,e)||_unsupportedIterableToArray(a,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}
function _iterableToArrayLimit(a,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(a)){var c=[],g=!0,l=!1,p=void 0;try{for(var m=a[Symbol.iterator](),q;!(g=(q=m.next()).done)&&(c.push(q.value),!e||c.length!==e);g=!0);}catch(n){l=!0,p=n}finally{try{if(!g&&null!=m["return"])m["return"]()}finally{if(l)throw p;}}return c}}function _arrayWithHoles(a){if(Array.isArray(a))return a}
function _typeof(a){"@babel/helpers - typeof";_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return _typeof(a)}
function ownKeys(a,e){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(a);e&&(g=g.filter(function(c){return Object.getOwnPropertyDescriptor(a,c).enumerable}));c.push.apply(c,g)}return c}
function _objectSpread(a){for(var e=1;e<arguments.length;e++){var c=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(c),!0).forEach(function(e){_defineProperty(a,e,c[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):ownKeys(Object(c)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(c,e))})}return a}
function _defineProperty(a,e,c){e in a?Object.defineProperty(a,e,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[e]=c;return a}
function _createForOfIteratorHelper(a,e){var c;if("undefined"===typeof Symbol||null==a[Symbol.iterator]){if(Array.isArray(a)||(c=_unsupportedIterableToArray(a))||e&&a&&"number"===typeof a.length){c&&(a=c);var g=0;e=function(){};return{s:e,n:function(){return g>=a.length?{done:!0}:{done:!1,value:a[g++]}},e:function(a){throw a;},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var l=!0,
p=!1,m;return{s:function(){c=a[Symbol.iterator]()},n:function(){var a=c.next();l=a.done;return a},e:function(a){p=!0;m=a},f:function(){try{if(!l&&null!=c["return"])c["return"]()}finally{if(p)throw m;}}}}
function _unsupportedIterableToArray(a,e){if(a){if("string"===typeof a)return _arrayLikeToArray(a,e);var c=Object.prototype.toString.call(a).slice(8,-1);"Object"===c&&a.constructor&&(c=a.constructor.name);if("Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return _arrayLikeToArray(a,e)}}function _arrayLikeToArray(a,e){if(null==e||e>a.length)e=a.length;for(var c=0,g=Array(e);c<e;c++)g[c]=a[c];return g}
VueBus.resourceReady(function(){function a(a,b){a=_createForOfIteratorHelper(a);var d;try{for(a.s();!(d=a.n()).done;)if(0!==b[d.value].length)return!0}catch(k){a.e(k)}finally{a.f()}return!1}Vue.use(window.vuelidate["default"]);var e=window.validators.requiredIf,c={},g={},l={},p={},m={},q=[],n=[],h=[],t=window.validators,x=Array.from(document.getElementsByClassName("form-container-wrapper")),w=JSON.parse(document.getElementById("validationConfig").value),f=w.validations,u={};w.groups.split(",").forEach(function(a){c[a]=
{showGroup:!1}});Object.keys(f).forEach(function(a,b){g[a]="";var d={};-1===["checkbox","button","submit"].indexOf(f[a].type)&&(f[a].hasOwnProperty("acceptedTypes")&&(f[a].hasOwnProperty("maxFileSize")||(f[a].maxFileSize=2048E4)),Object.keys(f[a]).forEach(function(b,c){if(f[a][b]&&"type"!==b)switch(b){case "sameAs":d[b]=t[b](f[a][b]);break;case "maxFileSize":u["fileSize"+a]=function(){return this.model[a].totalSize};d[b]=function(){var d=f[a].groupName;if(!d||this.groupModel[d].showGroup){d=parseInt(f[a][b]);
var c=this.model[a].totalSize;return c?c<=d:!0}return!0};break;case "acceptedTypes":u["extensions"+a]=function(){return this.model[a].files};d[b]=function(){var d=f[a].groupName;if(!d||this.groupModel[d].showGroup){var c=f[a][b].split(",");return c.length&&this.model[a]?this.model[a].files.some(function(b){return-1===c.indexOf(b.ext)})?!1:!0:!0}return!0};break;case "minLength":case "maxLength":c=f[a][b]&&parseInt(f[a][b]);d[b]=c?t[b](c):!0;break;case "groupName":break;default:d[b]=function(d){var c=
f[a].groupName;return!c||this.groupModel[c].showGroup?t[b](d):!0}}}));"checkbox"===f[a].type&&Object.keys(f[a]).forEach(function(b,c){f[a][b]&&"type"!==b&&"groupName"!==b&&(d[b]="required"===b?function(b){var d=f[a].groupName;return!d||this.groupModel[d].showGroup?b:!0}:function(){var d=f[a].groupName;return!d||this.groupModel[d].showGroup?t[b]:!0})});m[a]=d});var v={required:e(function(a){return!0})},r=function(){var a=document.getElementById("fieldsCrossValidation");return a&&a.value?JSON.parse(document.getElementById("fieldsCrossValidation").value):
""}();(function(){if(r)for(var c=0;c<r.length;c++)if(r[c].hasOwnProperty("connectedFieldsNamesGroup"))for(var b=r[c].connectedFieldsNamesGroup,d=0;d<b.length;d++){var k=b[d];p[k]={crossValidationErrorMessage:r[c].crossValidationErrorMessage};v[k]=b;l[k]={required:e(function(b){if(!event.target.name)return!0;var d=!0;a(v[event.target.name],b)&&(d=!1);return d})}}})();x.forEach(function(e){e.__vue__||new Vue({data:{model:g,groupModel:c,loaded:!1,submitError:!1,submitting:!1,recaptchaVerified:!1,submitErrMsg:"",
formData:new FormData,modelCrossValidation:g,crossValidationError:p,crossValidationBundles:{}},components:{VueRecaptcha:VueRecaptcha},el:e,validations:{model:m,modelCrossValidation:l,recaptcha:{required:function(){return this.recaptchaCheck}}},computed:{computedProperties:{get:function(){return u}},recaptchaCheck:function(){return this.recaptchaVerified}},mixins:[utilitiesMixin],methods:{showGroup:function(b,a,c,e){if(b&&"NONE"===b.toUpperCase())return this.groupModel[e].showGroup=!0;if("hasValue"!==
a||this.isEmptyString(this.model[b]))return this.groupModel[e].showGroup="hasNoValue"===a&&this.isEmptyString(this.model[b]),"hasNoValue"===a&&this.isEmptyString(this.model[b]);if(this.isEmptyString(c))return this.groupModel[e].showGroup=!0;this.groupModel[e].showGroup=this.model[b]===c;return this.model[b]===c},isEmptyString:function(b){return""===b||null==b},getFileExtension:function(b){b=/^.+\.([^.]+)$/.exec(b);return null==b?"":"."+b[1].toLowerCase()},selectFile:function(b){var a=this,c=b.target.files;
this[b.target.name+"FileNames"]||(this[b.target.name+"FileNames"]=[]);this.model[b.target.name]&&Object.keys(this.model[b.target.name]).length||(this.model[b.target.name]={type:"files",files:[],fileExtensions:"",totalSize:0});for(var e=function(){var d=c[f],e=a.getFileExtension(d.name);a[b.target.name+"FileNames"].push(d.name);a.$forceUpdate();var k=new FileReader;k.onload=function(a){this.model[b.target.name].files.push({contenType:d.type,fileName:d.name,data:a.target.result,size:d.size,ext:e});
this.calculateTotalSize(b.target.name);this.$v.model[b.target.name].$touch()}.bind(a);k.readAsArrayBuffer(d)},f=0;f<c.length;f++)e();this.crossValidateFields(b.target.name)},removeFile:function(b,a){var d=this[b+"FileNames"];d.splice(d.indexOf(a),1);d=this.model[b].files.findIndex(function(b){return b.fileName===a});this.model[b].files.splice(d,1);this.$forceUpdate();this.calculateTotalSize(b);this.$v.model[b].$touch();0===this.model[b].files.length&&(g[b]="")},cleanMultiUploadField:function(b){this.$refs["model-".concat(b.target.name)].value=
null},calculateTotalSize:function(b){if(this.model[b].files){var a=this.model[b].files.reduce(function(b,a){return b+a.size},0);this.model[b]=_objectSpread(_objectSpread({},this.model[b]),{},{totalSize:a})}this.$forceUpdate()},submitForm:function(){var b=this;this.$v.$touch();this.$refs.recaptcha||(this.recaptchaVerified=!0);var a=this.$el.querySelector('input[name\x3d"nrOfProducts"]');a=a?a.value:a;var c=[];if(a&&0<parseInt(a))for(var e=0;e<a;e++){var f={productName:this.$el.querySelector('input[name\x3d"medicineInfos['+
e+'][productName]"]').value,batchNumber:this.$el.querySelector('input[name\x3d"medicineInfos['+e+'][batchNumber]"]').value,condition:this.$el.querySelector('textarea[name\x3d"medicineInfos['+e+'][condition]"]').value,dosage:this.$el.querySelector('input[name\x3d"medicineInfos['+e+'][dosage]"]').value,startDate:this.$el.querySelector('input[name\x3d"medicineInfos['+e+'][startDate]"]').value,endDate:this.$el.querySelector('input[name\x3d"medicineInfos['+e+'][endDate]"]').value};c.push(f);if(void 0===
c[e].productName||0>=c[e].productName.length){this.$el.querySelector('input[name\x3d"medicineInfos['+e+'][productName]"]').parentElement.classList.add("error","touched");return}}this.formData.append("medicineInfos",JSON.stringify(c));this.$v.model.$invalid||this.$v.modelCrossValidation.$invalid||this.submitting||!this.recaptchaVerified||function(){var a=b.$refs.endpoint.value,c=b.$refs.redirect.value,d=b.$refs.resourcePath.value,e=document.getElementById("validationConfig")&&JSON.parse(document.getElementById("validationConfig").value||
"{}"),f=function(a){if("object"===_typeof(b.model[a])&&"files"===b.model[a].type){var c=[];b.model[a].files.forEach(function(d){c.push(new Blob([d.data],{type:d.contenType}));b.formData.append(a,new Blob([d.data],{type:d.contenType}),d.fileName,d.size)})}else if(""===b.model[a]&&0<document.getElementsByName(a).length&&0<h.length&&(-1!=n.indexOf(a)||"string"==typeof b.model[a])){b.formData.append(a,document.getElementsByName(a)[0].value);var d=document.getElementsByName(a)[0].attributes.getNamedItem("type");
null!==d&&"hidden"!==d.value&&b.formData.set(a,b.model[a])}else"boolean"==typeof b.model[a]?b.formData.has(a.substring(0,a.lastIndexOf("-")))&&b.formData.set(a.substring(0,a.lastIndexOf("-")),b.model[a.substring(0,a.lastIndexOf("-"))]):(Object.entries(b.groupModel).forEach(function(d){var c;d=_slicedToArray(d,2);var f=d[0];d[1].showGroup&&(null===(c=e.validations[a])||void 0===c?void 0:c.groupName)==f&&(b.formData.has(a)?b.formData.set(a,b.model[a]):b.formData.append(a,b.model[a]))}),""==(null===
(d=e.validations[a])||void 0===d?void 0:d.groupName)&&b.formData.append(a,b.model[a]))},g;for(g in b.model)f(g);b.formData.append("redirectURL",c);b.formData.append("resourcePath",d);d=b.$el.querySelectorAll(".track-form-options");if(0<d.length){var k={};d.forEach(function(a){k[a.value]=b.model[a.value]});b.addAnalytics("Click","Submit",{options:k})}else b.addAnalytics("Click","Submit");b.submitting=!0;b.submitError=!1;baseHttp().postFile(a,b.formData).then(function(a){"undefined"!==typeof c&&null!==
c?window.location.href=c:(b.submitting=!1,b.formData=new FormData)},function(a){b.submitError=!0;b.submitting=!1;b.formData=new FormData})}()},onVerify:function(a){a&&(this.recaptchaVerified=!0)},onExpired:function(){this.recaptchaVerified=!1},crossValidateFields:function(b,d){if(b=v[b])if(a(b,this.model)||d)for(d=0;d<b.length;d++)l[b[d]]="",this.$v.modelCrossValidation[b[d]].$reset();else for(d=0;d<b.length;d++)l[b[d]]={required:required},this.$v.modelCrossValidation[b[d]].$touch()},onSelectCheckbox:function(a,
d,c,e){a=a.target;if(a.checked)a.value=c,q.push(a.value),n.push(d);else if(!a.checked){c=[];var b=[];for(i=0;i<q.length;i++)q[i]==a.value&&-1==c.indexOf(n[i])&&(c.push(n[i]),b.push(i));for(j=0;j<c.length;j++)c[j]==d&&(q.splice(b[j],1),n.splice(b[j],1));a.value=""}h=[];for(i=0;i<n.length;i++)n[i]==d&&h.push(q[i]);"radio"==e&&(h=h.at(-1));this.model[d]=0==h.length?"":h;"boolean"==typeof this.model[d]&&(0==h.length?this.formData.set(h,""):1==h.length?this.formData.set(d,h[0]):this.formData.set(d,h))}},
mounted:function(){this.loaded=!0;this.submitErrMsg=this.$refs.submitErrMsg.value}})})});