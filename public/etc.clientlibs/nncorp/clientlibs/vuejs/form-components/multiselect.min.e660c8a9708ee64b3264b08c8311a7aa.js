function _typeof(a){"@babel/helpers - typeof";_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};return _typeof(a)}
function _extends(){_extends=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};return _extends.apply(this,arguments)}function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}));c.push.apply(c,d)}return c}
function _objectSpread(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?ownKeys(Object(c),!0).forEach(function(d){_defineProperty(a,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):ownKeys(Object(c)).forEach(function(d){Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(c,d))})}return a}
function _defineProperty(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}
function _unsupportedIterableToArray(a,b){if(a){if("string"===typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);"Object"===c&&a.constructor&&(c=a.constructor.name);if("Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return _arrayLikeToArray(a,b)}}function _iterableToArray(a){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(a))return Array.from(a)}
function _arrayWithoutHoles(a){if(Array.isArray(a))return _arrayLikeToArray(a)}function _arrayLikeToArray(a,b){if(null==b||b>a.length)b=a.length;for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function asyncGeneratorStep(a,b,c,d,e,f,g){try{var h=a[f](g),k=h.value}catch(l){c(l);return}h.done?b(k):Promise.resolve(k).then(d,e)}
function _asyncToGenerator(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){function f(k){asyncGeneratorStep(h,d,e,f,g,"next",k)}function g(k){asyncGeneratorStep(h,d,e,f,g,"throw",k)}var h=a.apply(b,c);f(void 0)})}}
Vue.component("multiselect",{data:function(){return{showDropdown:null,allOptions:[],selectedOptions:[],inputValue:"",translatedLabel:this.getString(this.label),translatedPlaceholder:this.getString(this.placeholder),filledInData:!1}},model:{prop:"selected",event:"input"},template:'\x3cdiv v-click-outside\x3d"clickOutside" class\x3d"multi-select-wrapper form-control" :class\x3d"{\'show\': showDropdown, \'hide\': showDropdown \x3d\x3d\x3d false, \'active\': selectedOptions.length \x3e 0, \'no-p-left\': noPaddingLeft}" :aria-label\x3d"ariaLabel"\x3e\n                    \x3ch4 v-if\x3d"label \x26\x26 showLabel" class\x3d"h4 label"\x3e{{translatedLabel}}\x3c/h4\x3e\n                    \x3cdiv class\x3d"dropdown-wrapper"\x3e\n                        \x3cinput type\x3d"text" class\x3d"input-hide" :value\x3d"getValue" :name\x3d"name"/\x3e\n                        \x3cinput type\x3d"text" v-model\x3d"inputValue" @blur\x3d"onBlur()" @click\x3d"toggleDropdown" :placeholder\x3d"showDropdown ? \'\' : translatedPlaceholder" class\x3d"textbox" :class\x3d"{\'has-left-icon\': showLeftIcon}"/\x3e\n                        \x3cbutton @click\x3d"toggleDropdown" type\x3d"button" class\x3d"dropdown-btn left-button" v-if\x3d"showLeftIcon"\x3e\n                            \x3cslot\x3e\x3c/slot\x3e\n                        \x3c/button\x3e\n                        \x3cbutton type\x3d"button" @click\x3d"toggleDropdown" class\x3d"dropdown-btn" v-if\x3d"!showLeftIcon" :aria-label\x3d"getString(\'Toggle dropdown\')"\x3e\x3cspan class\x3d"icon icon-dropdown"\x3e\x3c/span\x3e\x3c/button\x3e\n                        \x3cdiv class\x3d"dropdown-listbox" v-if\x3d"allOptions.length !\x3d 0" :aria-hidden\x3d"[!showDropdown]"\x3e\n                            \x3cdiv class\x3d"dropdown-listbox-content"\x3e\n                                \x3cdiv class\x3d"top-control"\x3e\n                                    \x3cdiv class\x3d"head"\x3e\n                                        \x3cp class\x3d"h1-s color-white"\x3e{{getString(placeholder)}}\x3c/p\x3e\n                                        \x3cbutton class\x3d"arrow-button" type\x3d"button" @click\x3d"toggleDropdown" :aria-label\x3d"getString(\'Hide overlay\')"\x3e\x3cspan class\x3d"icon icon-right-arrow-white"\x3e\x3c/span\x3e\x3c/button\x3e\n                                    \x3c/div\x3e\n                                    \x3cdiv class\x3d"actions"\x3e\n                                        \x3cbutton class\x3d"control-btn paragraph-s" type\x3d"button" @click\x3d"selectAll"\x3e{{getString(\'Select all\')}}\x3c/button\x3e\n                                        \x3cspan class\x3d"slash paragraph-s"\x3e/\x3c/span\x3e\n                                        \x3cbutton class\x3d"control-btn paragraph-s" type\x3d"button" @click\x3d"deselectAll"\x3e{{getString(\'Deselect all\')}}\x3c/button\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                                \x3cdiv class\x3d"list-options"\x3e\n                                    \x3cdiv class\x3d"option" v-for\x3d"(item, index) in filteredAllOptions" :key\x3d"index"\x3e \n                                        \x3cinput :id\x3d"name + item.value" class\x3d"checkbox" type\x3d"checkbox" v-model\x3d"item.tick" /\x3e\n                                        \x3clabel :for\x3d"name + item.value" class\x3d"label" @click\x3d"nestedOptions ? selectAllChildren(item) : chooseItem(item)"\x3e{{item.text}} \x3cspan v-if\x3d"item.total"\x3e({{item.total}}) \x3c/span\x3e\x3c/label\x3e                                        \n                                        \x3ctemplate v-if\x3d"item.filteredChildren \x26\x26 nestedOptions"\x3e\n                                            \x3cdiv class\x3d"child-option" v-for\x3d"(child, childIndex) in item.filteredChildren" :key\x3d"childIndex"\x3e \n                                                \x3cinput :id\x3d"name + child.value" class\x3d"checkbox" type\x3d"checkbox" v-model\x3d"child.tick" /\x3e\n                                                \x3clabel :for\x3d"name + child.value" class\x3d"label" @click\x3d"chooseItem(child, item)"\x3e{{child.text}} \x3cspan v-if\x3d"child.total"\x3e({{child.total}}) \x3c/span\x3e\x3c/label\x3e\n                                            \x3c/div\x3e\n                                        \x3c/template\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                            \x3c/div\x3e\n                        \x3c/div\x3e\n                        \x3cdiv v-else class\x3d"dropdown-listbox" :aria-hidden\x3d"[!showDropdown]"\x3e\n                            \x3cdiv class\x3d"dropdown-listbox-content"\x3e\n                                \x3cdiv class\x3d"top-control"\x3e\n                                    \x3cdiv class\x3d"head"\x3e\n                                        \x3cp class\x3d"h1-s color-white"\x3e{{getString(placeholder)}}\x3c/p\x3e\n                                        \x3cbutton type\x3d"button" class\x3d"arrow-button" @click\x3d"toggleDropdown" :aria-label\x3d"getString(\'Hide overlay\')"\x3e\x3cspan class\x3d"icon icon-right-arrow-white"\x3e\x3c/span\x3e\x3c/button\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                                \x3cdiv class\x3d"list-options"\x3e\n                                    \x3cspan class\x3d"color-white"\x3e \n                                        {{getString(\'There is no option\')}}\n                                    \x3c/span\x3e\n                                \x3c/div\x3e\n                            \x3c/div\x3e\n                        \x3c/div\x3e\n                    \x3c/div\x3e\n                    \x3cdiv v-if\x3d"showResults \x26\x26 selectedOptions.length \x3e 0" class\x3d"result-box m-xs-top"\x3e\n                        \x3cdiv v-for\x3d"(option, index) in selectedOptions" class\x3d"result-item infotext"\x3e\n                            \x3cspan\x3e{{option.text}}\x3c/span\x3e \n                            \x3cspan class\x3d"icon icon-times-white" @click\x3d"removeItem(option)"\x3e\n                                \x3cspan class\x3d"path1"\x3e\x3c/span\x3e\x3cspan class\x3d"path2"\x3e\x3c/span\x3e\x3cspan class\x3d"path3"\x3e\x3c/span\x3e\x3cspan class\x3d"path4"\x3e\x3c/span\x3e\n                            \x3c/span\x3e\n                        \x3c/div\x3e\n                    \x3c/div\x3e\n                \x3c/div\x3e',
computed:{getValue:function(){return this.selectedOptions&&this.selectedOptions.map(function(a){return a.value}).join(",")},filteredAllOptions:function(){var a=this,b=function(c){return-1!==c.text.toLowerCase().indexOf(a.inputValue.toLowerCase())};return this.allOptions.reduce(function f(d,e){var g=b(e),h=e.children&&e.children.some(b);e.children&&(e.filteredChildren=e.children.reduce(f,[]));(g||h)&&d.push(e);return d},[])}},methods:{onBlur:function(){this.$emit("blur")},toggleDropdown:function(){(this.showDropdown=
!this.showDropdown)&&1280>=window.innerWidth?VueBus.preventBodyScroll():VueBus.allowBodyScroll()},chooseItem:function(a,b){var c=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var f;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return c.selectedOptions||(c.selectedOptions=[]),f=c.selectedOptions&&c.selectedOptions.findIndex(function(h){return h.value===a.value}),-1===f?c.selectedOptions.push(a):(c.selectedOptions.splice(f,1),b&&(b.tick=!1)),g.next=
5,c.$nextTick();case 5:c.settingPlaceholder(),c.returnValueOnly?(c.$emit("input",c.selectedOptions.map(function(h){return h.value})),c.$emit("change",c.selectedOptions.map(function(h){return h.value}))):(c.$emit("input",c.selectedOptions),c.$emit("change",c.selectedOptions));case 7:case "end":return g.stop()}},e)}))()},removeItem:function(a){var b=this.selectedOptions.findIndex(function(h){return h.value===a.value}),c=this.allOptions.findIndex(function(h){return h.value===a.value}),d;if(-1===c)for(var e=
0;e<this.allOptions.length;e++){var f=this.allOptions[e];if(f.children){var g=f.children.findIndex(function(h){return h.value===a.value});-1!==g&&(d=e)}}this.selectedOptions[b].tick=!1;-1===c?(this.allOptions[d].children[g]=!1,this.allOptions[d].tick=!1):this.allOptions[c].tick=!1;this.selectedOptions.splice(b,1);this.settingPlaceholder();this.$emit("input",this.selectedOptions);this.$emit("change",this.selectedOptions)},clickOutside:function(){this.showDropdown&&1280<window.innerWidth&&(this.showDropdown=
!1,VueBus.allowBodyScroll())},setAllOptions:function(a){this.allOptions.forEach(function(b){b.tick=a;b.children&&b.children.forEach(function(c){c.tick=a})})},selectAll:function(){this.selectedOptions=[].concat(_toConsumableArray(this.allOptions),_toConsumableArray(this.allOptions.flatMap(function(a){return a.children||[]})));this.returnValueOnly?(this.$emit("input",this.selectedOptions.map(function(a){return a.value})),this.$emit("change",this.selectedOptions.map(function(a){return a.value}))):(this.$emit("input",
this.selectedOptions),this.$emit("change",this.selectedOptions));this.setAllOptions(!0);this.settingPlaceholder()},deselectAll:function(){this.selectedOptions.splice(0,this.selectedOptions.length);this.$emit("input",[]);this.$emit("change",this.selectedOptions);this.setAllOptions(!1);this.settingPlaceholder()},selectAllChildren:function(a){var b=this;return _asyncToGenerator(regeneratorRuntime.mark(function d(){var e;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return(e=
a.tick)?(a.children&&a.children.forEach(function(g){g.tick=!1}),b.selectedOptions=b.selectedOptions.filter(function(g){var h=g.value===a.value,k=!!a.children&&a.children.some(function(l){return l.value===g.value});return!(h||k)})):a.children&&a.children.forEach(function(g){g.tick=!0;-1<b.selectedOptions.findIndex(function(h){return h.value===g.value})||b.selectedOptions.push(g)}),b.$forceUpdate(),f.next=5,b.$nextTick();case 5:b.settingPlaceholder(),b.$emit("input",b.selectedOptions),b.$emit("change",
b.selectedOptions);case 8:case "end":return f.stop()}},d)}))()},getString:function(a){return Granite.I18n.get(a)},handleOptions:function(){var a=this;this.allOptions=this.options.filter(function(b){return b.value}).map(function(b){var c=a.selected&&!!a.selected.some(function(d){return d.value===b.value});b.children&&(b.children=_toConsumableArray(b.children.filter(function(d){return d.value}).map(function(d){var e=!!a.selected.some(function(f){return f.value===d.value});return d=_objectSpread(_objectSpread({},
d),{},{tick:e})})));return _extends({},b,{tick:c})});this.allOptions=this.sorting?this.sort(this.allOptions):this.allOptions;this.selectedOptions=this.allOptions.filter(function(b){return!0===b.tick});this.allOptions.forEach(function(b){b.children&&b.children.length&&b.children.forEach(function(c){c.tick&&a.selectedOptions.push(c)})});this.selectedOption&&0<this.selectedOption.length&&this.$emit("input",this.selectedOptions)},mountedData:function(){var a=this;this.apiUrl?findCountryContactService.getDropdownDataByUrl(this.apiUrl).then(function(b){a.allOptions=
a.sorting?a.sort(b.data):a.res.data;a.handleOptions()}):(this.allOptions=this.options.filter(function(b){return b.value}).map(function(b){var c=a.selected&&a.selected.some(function(d){return"object"===_typeof(d)?d.value===b.value:d===b.value})?!0:!1;return _extends({},b,{tick:c})}),this.handleOptions());this.settingPlaceholder()},settingPlaceholder:function(){switch(this.selectedOptions.length){case 0:this.translatedPlaceholder=this.getString(this.placeholder);break;case 1:this.translatedPlaceholder=
this.selectedOptions[0].text;break;default:this.translatedPlaceholder=this.getString(this.translatedLabel)+" (".concat(this.selectedOptions.length,")")}this.selectedOptions.length===this.allOptions.length&&this.selectedOptions.length&&(this.translatedPlaceholder=this.getString(this.placeholder)+" (".concat(this.getString("All"),")"))},sort:function(a){return a.length?a.sort(function(b,c){b=b.text&&b.text.toUpperCase();c=c.text&&c.text.toUpperCase();return b<c?-1:b>c?1:0}):[]}},props:{label:String,
name:String,showLabel:{type:Boolean,"default":!0},apiUrl:{type:String,"default":""},placeholder:{type:String,"default":Granite.I18n.get("Select option")},options:{type:Array,"default":function(){return[]}},nestedOptions:!1,selected:{type:Array,"default":[]},showLeftIcon:{type:Boolean},noPaddingLeft:{type:Boolean,"default":!1},ariaLabel:{type:String,"default":""},sorting:{type:Boolean,"default":!1},showResults:{type:Boolean,"default":!1},returnValueOnly:{type:Boolean,"default":!1},isForm:{type:Boolean,
"default":!1}},watch:{options:function(a,b){this.isForm?this.isForm&&a&&b&&JSON.stringify(a)!==JSON.stringify(b)&&this.mountedData():this.mountedData()}},mounted:function(){this.mountedData()},updated:function(){var a=this;this.filledInData||(this.filledInData=!0,this.selectedOptions=this.selected,this.selectedOptions.length&&this.selectedOptions.forEach(function(b){a.allOptions.forEach(function e(d){d.id===b.id?d.tick=!0:d.children&&(d.children.forEach(e),d.children.every(function(f){return f.tick})&&
(d.tick=!0))})}))}});