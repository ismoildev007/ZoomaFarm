function _typeof(a){"@babel/helpers - typeof";_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};return _typeof(a)}
function _extends(){_extends=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],e;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e])}return a};return _extends.apply(this,arguments)}function asyncGeneratorStep(a,b,c,e,f,d,k){try{var h=a[d](k),g=h.value}catch(l){c(l);return}h.done?b(g):Promise.resolve(g).then(e,f)}
function _asyncToGenerator(a){return function(){var b=this,c=arguments;return new Promise(function(e,f){function d(g){asyncGeneratorStep(h,e,f,d,k,"next",g)}function k(g){asyncGeneratorStep(h,e,f,d,k,"throw",g)}var h=a.apply(b,c);d(void 0)})}}
Vue.component("singleselect",{data:function(){return{showDropdown:!1,isAnimate:!1,allOptions:[],filterOptions:[],selectedOption:"",selectedIndex:1,translatedLabel:this.getString(this.label),translatedPlaceholder:this.getString(this.placeholder),searchText:"",keyPresstimeout:null,showDropdownWithLatency:!1}},model:{prop:"selected",event:"input"},template:'\n        \x3cdiv v-click-outside\x3d"clickOutside" class\x3d"single-select-wrapper form-control" :class\x3d"{\'show\': showDropdown, \'hide\': showDropdown \x3d\x3d\x3d false, \'active\': selectedOption !\x3d\x3d \'\', \'no-p-left\': noPaddingLeft}" :aria-label\x3d"ariaLabel"\x3e\n            \x3ch4 v-if\x3d"label \x26\x26 showLabel" class\x3d"h4 label"\x3e{{translatedLabel}} \x3cspan v-if\x3d"required || requiredCrossValidation" class\x3d"asterisk"\x3e*\x3c/span\x3e\x3c/h4\x3e\n            \x3cdiv class\x3d"position-relative"\x3e\n                \x3cinput type\x3d"text" class\x3d"input-hide" v-bind:value\x3d"getValue" v-bind:name\x3d"name"/\x3e\n                \x3cinput type\x3d"text" @click\x3d"toggleDropdown" @blur\x3d"onBlur()" v-bind:readonly\x3d"!allowTyping" v-bind:placeholder\x3d"translatedPlaceholder" v-model\x3d"searchText" v-on:keydown\x3d"onTyping" class\x3d"textbox" v-bind:required\x3d"required" v-bind:class\x3d"{\'has-left-icon\': showLeftIcon}"/\x3e\n                \x3cbutton @click\x3d"toggleDropdown" type\x3d"button" class\x3d"dropdown-btn left-button" v-if\x3d"showLeftIcon"\x3e\n                    \x3cslot\x3e\x3c/slot\x3e\n                \x3c/button\x3e\n                \x3cbutton type\x3d"button" @click\x3d"toggleDropdown" class\x3d"dropdown-btn" v-if\x3d"!showLeftIcon" v-bind:aria-label\x3d"getString(\'Toggle dropdown\')"\x3e\n                    \x3cspan class\x3d"icon icon-dropdown"\x3e\x3c/span\x3e\n                \x3c/button\x3e\n            \x3c/div\x3e\n            \x3cdiv @click\x3d"isAnimate\x3dtrue" class\x3d"dropdown-listbox dropdown-hide" v-bind:class\x3d"{\'animate\': isAnimate, \'dropdown-unhide\': showDropdownWithLatency}" v-if\x3d"filterOptions.length !\x3d 0" v-bind:aria-hidden\x3d"[!showDropdown]"\x3e\n                \x3cdiv class\x3d"dropdown-listbox-content"\x3e\n                    \x3cdiv class\x3d"top-control"\x3e\n                        \x3cdiv class\x3d"head"\x3e\n                            \x3cp class\x3d"h1-s dropdown-title color-white"\x3e{{getString(placeholder)}}\x3c/p\x3e\n                            \x3cbutton class\x3d"arrow-button" type\x3d"button" @click\x3d"toggleDropdown" v-bind:aria-label\x3d"getString(\'Hide overlay\')"\x3e\n                                \x3cspan class\x3d"icon icon-right-arrow-white"\x3e\x3c/span\x3e\n                            \x3c/button\x3e\n                        \x3c/div\x3e\n                    \x3c/div\x3e\n                    \x3cdiv class\x3d"list-options"\x3e\n                        \x3cdiv v-for\x3d"(item, index) in filterOptions" v-bind:key\x3d"index" class\x3d"option" v-bind:class\x3d"{ \'selected-option\': index \x3d\x3d\x3d selectedIndex }" @click\x3d"chooseItem(item, index)" v-bind:aria-labelledby\x3d"name"\x3e\n                            \x3cspan :id\x3d"item.value" :name\x3d"name" class\x3d"label color-white" v-html\x3d"item.text"\x3e\x3c/span\x3e\n                        \x3c/div\x3e\n                    \x3c/div\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n            \x3cdiv v-else class\x3d"dropdown-listbox dropdown-hide" v-bind:class\x3d"{\'dropdown-unhide\': showDropdownWithLatency}" v-bind:aria-hidden\x3d"[!showDropdown]"\x3e\n                \x3cdiv class\x3d"dropdown-listbox-content"\x3e\n                    \x3cdiv class\x3d"top-control"\x3e\n                        \x3cdiv class\x3d"head"\x3e\n                            \x3cp class\x3d"h1-s dropdown-title color-white"\x3e{{getString(placeholder)}}\x3c/p\x3e\n                            \x3cbutton type\x3d"button" class\x3d"arrow-button" @click\x3d"toggleDropdown" v-bind:aria-label\x3d"getString(\'Hide overlay\')"\x3e\n                                \x3cspan class\x3d"icon icon-right-arrow-white"\x3e\x3c/span\x3e\n                            \x3c/button\x3e\n                        \x3c/div\x3e\n                    \x3c/div\x3e\n                    \x3cdiv class\x3d"list-options"\x3e\n                        \x3cspan class\x3d"color-white"\x3e \n                            {{getString(\'There is no option\')}}\n                        \x3c/span\x3e\n                    \x3c/div\x3e  \n                \x3c/div\x3e \n            \x3c/div\x3e\n        \x3c/div\x3e\n    ',
computed:{getValue:function(){return this.selectedOption&&Object.keys(this.selectedOption).length?this.selectedOption.value:""}},mixins:[utilitiesMixin],methods:{checkEmptySelectedOption:function(){return this.selectedOption&&Object.keys(this.setAllOptions).length},onBlur:function(){this.$emit("blur")},displayDropdown:function(){(this.showDropdown=!0,1280>=window.innerWidth)?VueBus.preventBodyScroll():VueBus.allowBodyScroll()},toggleDropdown:function(){(this.showDropdown=!this.showDropdown)&&1280>=
window.innerWidth?VueBus.preventBodyScroll():VueBus.allowBodyScroll();this.$emit("click")},chooseItem:function(a,b){var c=this;return _asyncToGenerator(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return c.selectedOption=a,d.next=3,c.$nextTick();case 3:c.settingPlaceholder(),c.toggleDropdown(),c.selectedIndex=b,c.allowTyping&&(c.searchText=c.showLabelWhenSelected?c.stripHtmlTags(c.selectedOption.label):c.stripHtmlTags(c.selectedOption.text)),
c.returnValueOnly?(c.$emit("input",c.selectedOption.value),c.$emit("change",c.selectedOption.value)):(c.$emit("input",c.selectedOption),c.$emit("change",c.selectedOption));case 8:case "end":return d.stop()}},f)}))()},onTyping:function(a){this.allowTyping&&(this.displayDropdown(),this.filterOption(a),this.searchText||this.settingPlaceholder(),this.$emit("typing",this.searchText))},filterOption:function(a){var b=this;"ArrowUp"===a.key?(a.preventDefault(),0<this.selectedIndex&&(this.selectedIndex--,
this.fixScrolling())):"ArrowDown"===a.key?(a.preventDefault(),this.selectedIndex<this.filterOptions.length-1&&(this.selectedIndex++,this.fixScrolling(!0))):"Enter"===a.key?(a.preventDefault(),this.selectedOption=this.filterOptions[this.selectedIndex],this.chooseItem(this.selectedOption,this.selectedIndex)):(newOptions=[],this.keyPresstimeout&&clearTimeout(this.keyPresstimeout),this.keyPresstimeout=setTimeout(function(){""!==b.searchText&&2<=b.searchText.length?(b.allOptions.map(function(c){-1!==c.text.toLowerCase().indexOf(b.searchText.toLowerCase())&&
newOptions.push(c)}),b.filterOptions=newOptions):b.filterOptions=b.allOptions;b.selectedIndex=0}))},fixScrolling:function(a){var b=this.$el.getElementsByClassName("selected-option")[0];b.parentNode.scrollTop=b.offsetTop-(a?100:165)},clickOutside:function(){this.showDropdown&&1280<window.innerWidth&&(this.showDropdown=!1,VueBus.allowBodyScroll())},setAllOptions:function(a){this.allOptions=this.options.map(function(b){return _extends({},b,{tick:a})})},getString:function(a){return Granite.I18n.get(a)},
predefineValues:function(){void 0!==this.defaultSelectedIndex&&(this.selectedIndex=this.defaultSelectedIndex)},mountedData:function(){var a=this;this.apiUrl?void 0!=this.allOptions&&0==this.allOptions.length&&findCountryContactService.getDropdownDataByUrl(this.apiUrl).then(function(b){a.allOptions=a.sorting?a.sort(b):b;a.emptyOption&&a.allOptions.unshift({text:a.emptyOptionText,value:a.emptyOptionText});a.selectedOption&&0<a.selectedOption.length&&a.$emit("input",a.selectedOption);a.filterOptions=
a.allOptions}):(this.allOptions=this.sorting?this.sort(this.options):this.options,this.emptyOption&&this.allOptions.unshift({text:this.emptyOptionText,value:this.emptyOptionText}),this.selectedOption&&0<this.selectedOption.length&&this.$emit("input",this.selectedOption));this.filterOptions=this.allOptions;this.settingPlaceholder();this.plainTextEnabled&&this.stripHtmlFromAllOptionsText()},stripHtmlFromAllOptionsText:function(){var a=this;this.allOptions.forEach(function(b,c){this[c].text=a.retrievePlainTextFromHtml(this[c].text)},
this.allOptions)},settingPlaceholder:function(){this.placeholder=this.stripHtmlTags(this.placeholder);if(this.selectedOption&&Object.keys(this.selectedOption).length)switch(this.selectedOption){case "":this.translatedPlaceholder=this.getString(this.placeholder);break;default:this.searchText=this.showLabelWhenSelected?this.stripHtmlTags(this.selectedOption.label):this.stripHtmlTags(this.selectedOption.text)}else this.translatedPlaceholder=this.getString(this.placeholder)},sort:function(a){if(a.length)return a.sort(function(b,
c){b=b.text&&b.text.toUpperCase();c=c.text&&c.text.toUpperCase();return b<c?-1:b>c?1:0})},handlingResize:function(){this.allowTyping=768<window.innerWidth||!1},setLabels:function(){this.customLabel?this.translatedLabel=this.customLabel:this.translatedLabel}},props:{label:String,customLabel:String,name:String,showLabel:{type:Boolean,"default":!0},required:{type:Boolean,"default":!1},requiredCrossValidation:{type:Boolean,"default":!1},apiUrl:{type:String,"default":""},placeholder:{type:String,"default":Granite.I18n.get("Select option")},
options:{type:Array[Object],"default":function(){return[]}},selected:{type:Object|String},showLeftIcon:{type:Boolean},noPaddingLeft:{type:Boolean,"default":!1},ariaLabel:{type:String,"default":""},sorting:{type:Boolean,"default":!1},returnValueOnly:{type:Boolean,"default":!1},emptyOption:{type:Boolean,"default":!1},emptyOptionText:{type:String,"default":""},plainTextEnabled:{type:Boolean,"default":!1},defaultSelectedIndex:{type:Number},allowTyping:{type:Boolean,"default":!0},showLabelWhenSelected:{type:Boolean,
"default":!1}},watch:{options:function(){this.mountedData()},selected:function(){var a=this;"object"===_typeof(this.selected)?this.selectedOption=this.allOptions.find(function(b){return b.text===a.selected.text}):this.selectedOption=this.allOptions.find(function(b){return b.value===a.selected});this.mountedData()},showDropdown:function(){if(this.showDropdown)this.showDropdownWithLatency=!0;else{var a=this;setTimeout(function(){a.showDropdownWithLatency=!1},300)}}},mounted:function(){this.setLabels();
this.predefineValues();this.mountedData();window.addEventListener("resize",this.handlingResize)}});